(function(){'use strict';var q=null,r=null;function aa(a,b){this.c=a.toString();this.b=b;this.a=!1}function ba(a,b){return new aa(a.c++,b)}function ca(a,b){for(var c=0;c<a.a.length;c++)if(a.a[c]===b){a.a.splice(c,1);t(a.b);break}};function da(a,b){return{path:a,s:b}}function ea(a,b){if(""!==b&&"#"===b[0])if("!"===b[1])b=b.substr(2);else return!1;for(var c=0;c<a.length;c++){var d=a[c],e=d.path;if("string"===typeof e){if(b===e)return d.s(),!0}else if(e=b.match(e))return 1<e.length?d.s.apply(d,e.slice(1)):d.s(),!0}return!1};function ha(a){var b=q;b.b=a;t(b.a)};function u(a,b,c){this.a=a;this.b=b;this.c=c}function v(a){0!==(a.a&1)?w(a.c):a.c.call()};function ia(){this.a=0;this.c=[];this.b=this.f=this.h=this.g=null}function ja(a){var b=ka();b.a|=8;null===b.f&&(b.f=[]);b.f.push(a)};function la(a){var b=this.a="__pms"+Math.random().toString();window.addEventListener("message",function(c){c.source===window&&c.data===b&&a()})};function ma(a){this.b=new window.MutationObserver(a);this.a=document.createTextNode("");this.b.observe(this.a,{characterData:!0})};function x(){this.a=[];this.b=[]}function na(a){for(var b=0,c=a.a;b<c.length;)c[b++]();b=0;for(c=a.b;b<c.length;)c[b].call(c[b+1]),b+=2}function oa(a){0===(a.a&8)&&(a.a|=8,window.requestAnimationFrame(a.i))}function ka(){var a=y;oa(a);return a.f};var y=new function(){this.a=0;this.b=1;this.c=new x;this.h=new x;this.g=new ia;this.f=new ia;this.j=[];var a=this;new ma(function(){a.a|=256;for(var b=a.c;0!==b.a.length||0!==b.b.length;)a.c=new x,na(b),b=a.c;a.b++;a.a&=-258});new la(function(){a.a&=-3;a.a|=256;var b=a.h;if(0!==b.a.length||0!==b.b.length)a.h=new x,na(b);a.b++;a.a&=-257});this.i=function(){var b=a.j,c,d,e,g,f,k;a.a&=-9;a.a|=256;c=a.f;a.f=a.g;a.g=c;for(f=0;f<b.length;f++)b[f].a|=8;do{for(;0!==(c.a&3);){if(0!==(c.a&1))for(c.a&=-2,d=
c.c,f=0;f<d.length;f++)if(e=d[f],null!==e)for(d[f]=null,k=0;k<e.length;k++)g=e[k],g.constructor===z?A(g):g.call();if(0!==(c.a&2))for(c.a&=-3,e=c.g,f=0;f<e.length;f++)g=e[f],g.constructor===z?A(g):g.call()}f=0;for(k=b.length;f<k;)g=b[f++],0===(g.a&16)?(g.a&=-33,f===k?b.pop():b[--f]=b.pop()):A(g);for(;0!==(c.a&4);)for(c.a&=-5,e=c.h,c.h=null,f=0;f<e.length;f++)g=e[f],g.constructor===z?A(g):g.call()}while(0!==(c.a&3));for(;0!==(c.a&8);)for(c.a&=-9,e=c.f,f=0;f<e.length;f++)g=e[f],g.constructor===z?A(g):
g.call();null!==c.b&&(c.b.constructor===B?c.b.b.focus():c.b.focus(),c.b=null);0<b.length&&oa(a);a.b++;a.a&=-257}};function pa(){this.c=y.b;this.a=this.b=null}function D(a,b){var c,d;0===(b.a&2)?(c=a.b,c.constructor===u||1===c.length?a.b=null:(d=c.indexOf(b),c[d]=c.pop())):(c=a.a,null!==c&&(c.constructor===u||1===c.length?a.a=null:(d=c.indexOf(b),c[d]=c.pop())))}function t(a){var b=y.b;if(a.c<b){a.c=b;var b=a.b,c;if(null!==b)if(b.constructor===u)v(b);else for(c=0;c<b.length;c++)v(b[c]);b=a.a;if(null!==b)if(a.a=null,b.constructor===u)v(b);else for(c=0;c<b.length;c++)v(b[c])}};function qa(a){this.a=0;this.h=a;this.f=this.b=this.g=this.c=null}function E(a){return new qa(a)}function ra(a){var b,c,d,e,g;if(null===a.f){g=0===(a.a&1)?document.createElement(a.h):document.createElementNS("http://www.w3.org/2000/svg",a.h);if(null!==a.c)for(d=Object.keys(a.c),b=0,c=d.length;b<c;b++)e=d[b],g[e]=a.c[e];null!==a.g&&(g.style.cssText=a.g);null!==a.b&&(g.className=a.b);0!==(a.a&2)&&(a.f=g);return g}return a.f.cloneNode(!1)}function F(a,b){a.c=b;return a};function G(){this.a=0;this.c="div";this.f=this.b=this.g=null}function sa(a,b){var c;c="string"===typeof a.c?0===(a.a&1)?document.createElement(a.c):document.createElementNS("http://www.w3.org/2000/svg",a.c):ra(a.c);c=new z(8,a,b,c);null!==a.b&&a.b(c);return c}function z(a,b,c,d){this.a=a;this.i=b;this.l=null===c?0:c.l+1;this.c=this.b=null;this.f=d;this.j=this.g=this.h=null}function H(a,b){var c=a.i.g;null===c?a.c!==b&&(a.c=b,a.a|=8):c(a,b)}function A(a){10===(a.a&10)&&(a.i.f(a),a.a&=-9)}
function I(a,b){null===a.h?(b.h=a,0!==(a.a&4)?(ta(b,a.f,a),a.a&=-5):(b.b=a.f,ua(b,a))):J(a.h,b,a);a.h=b}function w(a){if(0===(a.a&9)){a.a|=8;va(a);var b=ka(),c=a.l,d;void 0===c&&(c=-1);if(-1===c)b.a|=2,null===b.g&&(b.g=[]),b.g.push(a);else{for(b.a|=1;c>=b.c.length;)b.c.push(null);d=b.c[c];null===d&&(d=b.c[c]=[]);d.push(a)}}}function K(a){a.a|=2;a=a.h;null!==a&&(a.constructor===B?wa(a):a.constructor===z&&K(a))}
function xa(a){a.a|=1;var b=a.h;null!==b&&(b.constructor===B?L(b):b.constructor===z&&xa(b));a.a&=-19;b=a.g;if(null!==b)if(b.constructor===u)D(b.b,b);else for(var c=0;c<b.length;c++){var d=b[c];D(d.b,d)}a.g=null;va(a)}function ya(a,b){var c=new u(1,b,a),d;0===(c.a&2)?(d=b.b,null===d?b.b=c:d.constructor===u?b.b=[d,c]:d.push(c)):(d=b.a,null===d?b.a=c:d.constructor===u?b.a=[d,c]:d.push(c));d=a.g;null===d?a.g=c:d.constructor===u?a.g=[a.g,c]:d.push(c)}
function va(a){var b=a.j;if(null!==b)if(b.constructor===u)D(b.b,b);else for(var c=0;c<b.length;c++){var d=b[c];D(d.b,d)}a.j=null};function za(a){var b=y;b.a|=256;a();b.b++;b.a&=-257};function Aa(a,b,c){this.b=a;this.c=b;this.a=c}var Ba=F(E("ul"),{id:"filters"}),Ca=F(E("a"),{href:"#!/"}),Da=F(E("a"),{href:"#!/active"}),Ea=F(E("a"),{href:"#!/completed"}),Fa=F(E("span"),{id:"todo-count"}),Ga=F(E("button"),{id:"clear-completed"}),O=new G;O.c=F(E("footer"),{id:"footer"});O.b=function(a){a.f.onclick=function(b){if("clear-completed"===b.target.id){for(var a=r,d=[],e=0;e<a.a.length;e++){var g=a.a[e];g.a||d.push(g)}a.a=d;t(a.b);b.preventDefault();b.stopPropagation()}}};
O.f=function(a){var b=[],c=a.c.b,d=a.c.c,e=a.c.a;b.push(P(Q(Ba),[P(Q("li"),[P(R(Q(Ca),0===c?"selected":null),"All")]),new B(1,null," "),P(Q("li"),[P(R(Q(Da),1===c?"selected":null),"Active")]),new B(1,null," "),P(Q("li"),[P(R(Q(Ea),2===c?"selected":null),"Completed")])]));b.push(P(Q(Fa),[P(Q("strong"),e.toString()),new B(1,null,1<e?" items left":" item left")]));0<d&&b.push(P(Q(Ga),"Clear completed ("+d+")"));I(a,P(S(),b))};function B(a,b,c){this.a=a;this.i=b;this.c=null;this.g=c;this.h=this.b=this.f=this.j=this.l=null}function Q(a){return new B(2,a,null)}function T(a,b){void 0===b&&(b=null);return new B(4,a,b)}function S(){return new B(8,null,null)}function R(a,b){a.j=b;return a}function P(a,b){a.f=b;return a}function U(a,b){return a.a===b.a&&a.i===b.i&&a.c===b.c}
function Ha(a,b){var c=a.a;0!==(c&1)?a.b=document.createTextNode(a.g):0!==(c&2)?a.b="string"===typeof a.i?0===(c&16)?document.createElement(a.i):document.createElementNS("http://www.w3.org/2000/svg",a.i):ra(a.i):0!==(c&4)&&(c=sa(a.i,b),a.b=c.f,a.h=c)}
function ua(a,b){var c,d,e,g;c=a.a;var f;if(0!==(c&10)){f=a.b;var k=a.g;if(null!==k)for(g=Object.keys(k),c=0,d=g.length;c<d;c++)e=g[c],f[e]=k[e];null!==a.l&&(f.style.cssText=a.l);null!==a.j&&(f.className=a.j);e=a.f;if(null!==e)if(0===(a.a&768))if("string"===typeof e)f.textContent=e;else for(c=0,d=e.length;c<d;c++)V(a,e[c],null,b);else c=a.b,0!==(a.a&256)?c.value=a.f:c.checked=a.f}else 0!==(c&4)&&(c=a.h,H(c,a.g),A(c))}
function ta(a,b,c){var d=a.a,e=a.f;a.b=b;if(0!==(d&4))e=a.i,b=new z(12,e,c,b),null!==e.b&&e.b(b),b=a.h=b,H(b,a.g),A(b);else if(null!==e&&"string"!==typeof e&&0<e.length){for(var d=b.firstChild,g;8===d.nodeType;)g=d,d=d.nextSibling,b.removeChild(g);for(a=0;a<e.length;a++)for(ta(e[a],d,c),d=d.nextSibling;8===d.nodeType;)g=d,d=d.nextSibling,b.removeChild(g)}}
function J(a,b,c){var d=a.b,e=a.a;b.b=d;if(0!==(e&1))a.g!==b.g&&(a.b.nodeValue=b.g);else if(0!==(e&10)){if(a.g!==b.g){var g=a.g,f=b.g,k,l,p,h,m,n;if(null!==g)if(null===f)for(h=Object.keys(g),k=0,l=h.length;k<l;k++)d[h[k]]=void 0;else{h=Object.keys(g);k=0;for(l=h.length;k<l;k++)p=h[k],f.hasOwnProperty(p)?(m=g[p],n=f[p],m!==n&&(d[p]=n)):d[p]=void 0;h=Object.keys(f);k=0;for(l=h.length;k<l;k++)p=h[k],g.hasOwnProperty(p)||(d[p]=f[p])}else if(null!==f)for(h=Object.keys(f),k=0,l=h.length;k<l;k++)p=h[k],
d[p]=f[p]}a.l!==b.l&&(d.style.cssText=null===b.l?"":b.l);a.j!==b.j&&(d.className=null===b.j?"":b.j);if(0===(a.a&768))if(d=a.f,b=b.f,f=0,k=!1,"string"===typeof d)if(null===b)a.b.removeChild(a.b.firstChild);else if("string"===typeof b)d!==b&&((c=a.b.firstChild)?c.nodeValue=b:a.b.textContent=b);else for(a.b.removeChild(a.b.firstChild);f<b.length;)V(a,b[f++],null,c);else if("string"===typeof b){if(null!==d)for(;f<d.length;)W(a,d[f++]);a.b.textContent=b}else if(null!==d&&0!==d.length)if(null===b||0===
b.length)for(;f<d.length;)W(a,d[f++]);else if(1===d.length&&1===b.length)e=d[0],g=b[0],U(e,g)?J(e,g,c):Ia(a,g,e,c);else if(1===d.length){e=d[0];if(0===(a.a&32))for(;f<b.length;){g=b[f++];if(U(e,g)){J(e,g,c);k=!0;break}V(a,g,e.b,c)}else for(;f<b.length;){g=b[f++];if(e.c===g.c){J(e,g,c);k=!0;break}V(a,g,e.b,c)}if(k)for(;f<b.length;)V(a,b[f++],null,c);else W(a,e)}else if(1===b.length){g=b[0];if(0===(a.a&32))for(;f<d.length;){e=d[f++];if(U(e,g)){J(e,g,c);k=!0;break}W(a,e)}else for(;f<d.length;){e=d[f++];
if(e.c===g.c){J(e,g,c);k=!0;break}W(a,e)}if(k)for(;f<d.length;)W(a,d[f++]);else V(a,g,null,c)}else if(0===(a.a&32)){e=f=0;k=d.length-1;for(g=b.length-1;f<=k&&e<=g;){l=d[f];p=b[e];if(!U(l,p))break;f++;e++;J(l,p,c)}for(;f<=k&&e<=g;){l=d[k];p=b[g];if(!U(l,p))break;k--;g--;J(l,p,c)}for(;f<=k&&e<=g;)l=d[f++],p=b[e++],U(l,p)?J(l,p,c):Ia(a,p,l,c);if(f<=k){do W(a,d[f++]);while(f<=k)}else if(e<=g){d=g+1;d=d<b.length?b[d].b:null;do V(a,b[e++],d,c);while(e<=g)}}else{e=m=0;k=d.length-1;l=b.length-1;f=d[m];g=
b[e];h=d[k];n=b[l];var C=!1,M;p=0;a:do{for(C=!0;f.c===g.c;){J(f,g,c);m++;e++;if(m>k||e>l)break a;f=d[m];g=b[e];C=!1}for(;h.c===n.c;){J(h,n,c);k--;l--;if(m>k||e>l)break a;h=d[k];n=b[l];C=!1}for(;f.c===n.c;){J(f,n,c);f=l+1;f=f<b.length?b[f].b:null;a.b.insertBefore(n.b,f);m++;l--;if(m>k||e>l)break a;f=d[m];n=b[l];C=!1;continue a}for(;h.c===g.c;){J(h,g,c);a.b.insertBefore(g.b,f.b);k--;e++;if(m>k||e>l)break a;h=d[k];g=b[e];C=!1}}while(!C&&m<=k&&e<=l);if(m>k)for(f=l+1,f=f<b.length?b[f].b:null;e<=l;)V(a,
b[e++],f,c);else if(e>l)for(;m<=k;)W(a,d[m++]);else{C=k-m+1;f=l-e+1;g=Array(f);for(h=0;h<f;h++)g[h]=-1;var fa=!1,ga=0;if(16>=C*f)for(h=m;h<=k;h++){var N=!0;n=d[h];for(m=e;m<=l;m++)if(M=b[m],n.c===M.c){g[m-e]=h;p>m?fa=!0:p=m;J(n,M,c);N=!1;break}N&&(W(a,n),ga++)}else{N={};for(h=e;h<=l;h++)n=b[h],N[n.c]=h;for(h=m;h<=k;h++)n=d[h],m=N[n.c],void 0!==m?(M=b[m],g[m-e]=h,p>m?fa=!0:p=m,J(n,M,c)):(W(a,n),ga++)}if(fa){k=g.slice(0);d=[];d.push(0);l=0;for(p=g.length;l<p;l++)if(-1!==g[l])if(h=d[d.length-1],g[h]<
g[l])k[l]=h,d.push(l);else{h=0;for(m=d.length-1;h<m;)n=(h+m)/2|0,g[d[n]]<g[l]?h=n+1:m=n;g[l]<g[d[h]]&&(0<h&&(k[l]=d[h-1]),d[h]=l)}h=d.length;for(m=d[h-1];0<h--;)d[h]=m,m=k[m];m=d.length-1;for(h=f-1;0<=h;h--)-1===g[h]?(f=h+e,n=b[f],f+=1,f=f<b.length?b[f].b:null,V(a,n,f,c)):0>m||h!==d[m]?(f=h+e,n=b[f],f+=1,f=f<b.length?b[f].b:null,a.b.insertBefore(n.b,f)):m--}else if(C-ga!==f)for(h=f-1;0<=h;h--)-1===g[h]&&(f=h+e,n=b[f],f+=1,f=f<b.length?b[f].b:null,V(a,n,f,c))}}else{if(null!==b&&0<b.length)for(f=0;f<
b.length;f++)V(a,b[f],null,c)}else 0!==(e&256)?d.value!==b.f&&(d.value=b.f):d.checked!==b.f&&(d.checked=b.f)}else 0!==(e&4)&&(a=b.h=a.h,H(a,b.g),A(a))}function wa(a){if(0===(a.a&4)){if(a=a.f,null!==a&&"string"!==typeof a)for(var b=0;b<a.length;b++)wa(a[b])}else K(a.h)}function L(a){if(0!==(a.a&4))xa(a.h);else if(null!==a.f&&(a=a.f,"string"!==typeof a))for(var b=0;b<a.length;b++)L(a[b])}function V(a,b,c,d){Ha(b,d);a.b.insertBefore(b.b,c);0!==(b.a&4)&&K(b.h);ua(b,d)}
function Ia(a,b,c,d){Ha(b,d);a.b.replaceChild(b.b,c.b);L(c);0!==(b.a&4)&&K(b.h);ua(b,d)}function W(a,b){a.b.removeChild(b.b);L(b)};function Ja(){this.a=!1;this.o=this.b=null}var X=new G;X.c=E("li");var Ka=E("input");Ka.b="edit";var La=F(Ka,{type:"text"}),Ma=F(E("input"),{type:"checkbox"});Ma.b="toggle";X.b=function(a){a.b=new Ja;a.f.m=a};X.g=function(a,b){a.c=b;a.a|=8};
X.f=function(a){var b=a.c,c;a.b.a?c=b.a?"editing completed":"editing":c=b.a?"completed":null;var d=R(Q("div"),"view"),e=new B(514,void 0===Ma?"input":Ma,null);e.f=b.a;b=P(d,[e,P(Q("label"),b.b),R(Q("button"),"destroy")]);a.b.a?(d=a.b,e=Q(La),e.g={value:a.b.b},d=d.o=e,b=[b,d]):(b=[b],a.b.o=null);c=R(S(),c);I(a,P(c,b))};function Na(a){a.b.a=!0;a.b.b=a.c.b;ja(function(){a.b.o.b.focus()});w(a)}function Oa(a){a.b.a=!1;a.b.b=null;w(a)};var Y=new G;Y.c=F(E("ul"),{id:"todo-list"});
Y.b=function(a){a.f.onkeydown=function(a){var c=a.target;if(c.classList.contains("edit"))if(13===a.keyCode){a=c.parentNode;a=a.m;var c=a.c,d=a.b.o.b.value,e=r,d=d.trim();""===d?ca(e,c):(c.b=d,t(e.b));Oa(a)}else 27===a.keyCode&&(a=c.parentNode,a=a.m,Oa(a))};a.f.ondblclick=function(a){a=a.target;"LABEL"===a.tagName&&Na(a.parentNode.parentNode.m)};a.f.addEventListener("focusout",function(a){a=a.target;a.classList.contains("edit")&&Oa(a.parentNode.m)});a.f.onclick=function(a){a=a.target;a.classList.contains("destroy")&&
ca(r,a.parentNode.parentNode.m.c)};a.f.onchange=function(a){a=a.target;if(a.classList.contains("toggle")){a=a.parentNode.parentNode.m.c;var c=r;a.a=!a.a;t(c.b)}}};Y.f=function(a){for(var b=a.c,c=Array(b.length),d=0;d<b.length;d++){var e=b[d],g=d,f=T(X,e);f.c=e.c;c[g]=f}b=S();b.a|=32;I(a,P(b,c))};function Pa(a,b){this.b=a;this.a=b}var Z=new G;Z.c=F(E("section"),{id:"main"});var Qa=F(E("input"),{type:"checkbox",id:"toggle-all"});Z.b=function(a){a.f.onchange=function(b){if("toggle-all"===b.target.id){for(var c=0!==a.c.a,d=r,e=0;e<d.a.length;e++)d.a[e].a=c;t(d.b)}b.stopPropagation();b.preventDefault()}};Z.f=function(a){var b=S(),c=new B(514,void 0===Qa?"input":Qa,null);c.f=0===a.c.a;I(a,P(b,[c,T(Y,a.c.b)]))};var Ra=new G;Ra.c="header";var Sa=F(E("input"),{id:"new-todo",type:"text",placeholder:"What needs to be done",autofocus:!0});Ra.b=function(a){a.b="";a.f.m=a;a.f.onkeydown=function(a){var c=a.currentTarget.m;if(13===a.keyCode&&"new-todo"===a.target.id){var d=c.b,e=r,d=d.trim();""!==d&&e.a.push(ba(e,d));t(e.b);c.b="";w(c);a.preventDefault()}};a.f.oninput=function(a){var c=a.currentTarget.m;a=a.target;"new-todo"===a.id&&(c.b=a.value,w(c))}};
Ra.f=function(a){var b=S(),c=P(Q("h1"),"todos"),d=Q(Sa);d.g={value:a.b};I(a,P(b,[c,d]))};var Ta=new G;Ta.c=E("section");Ta.b=function(a){ya(a,r.b);ya(a,q.a)};Ta.f=function(a){var b=r.a,c=q.b,d,e,g=0,f;if(1===c)for(f=[],e=0;e<b.length;e++)d=b[e],d.a?g++:f.push(d);else if(2===c)for(f=[],e=0;e<b.length;e++)d=b[e],d.a&&(g++,f.push(d));else for(f=[],e=0;e<b.length;e++)d=b[e],f.push(d),d.a&&g++;d=b.length-g;e=[];e.push(T(Ra));0<b.length&&e.push(T(Z,new Pa(f,d)));(0<d||0<g)&&e.push(T(O,new Aa(c,g,d)));I(a,P(S(),e))};q=new function(){this.b=0;this.a=new pa};r=new function(){this.c=0;this.a=[];this.b=new pa};(function(a,b,c){var d=window.location,e=decodeURIComponent(d.hash);""===e&&(d.hash=e="#!"+b);window.addEventListener("hashchange",function(){var g=decodeURIComponent(d.hash);""===g&&(d.hash=e="#!"+b);e!==g&&(e=g,ea(a,g)||c())});ea(a,e)||c()})([da("/completed",function(){console.log("completed");ha(2)}),da("/active",function(){console.log("active");ha(1)}),da("/",function(){console.log("all");ha(0)})],"",function(){});
document.addEventListener("DOMContentLoaded",function(){za(function(){var a=document.getElementById("todoapp"),b=sa(Ta,null);a.appendChild(b.f);b.a|=2;H(b,null);A(b)})});}).call();
